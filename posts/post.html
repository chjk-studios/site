<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Post</title>
  <link rel="stylesheet" href="styles.css">
  <script src="https://www.gstatic.com/firebasejs/11.9.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.9.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <nav class="nav">
    <div class="nav-logo">
      <img src="/images/logo.png" class="logo-nav">
      <span class="logo-text"><a href="#" style="cursor: url('/cursors/pixel-black/hand.cur'), auto;">Chickenjockey</a></span>
    </div>
    <div class="nav-menu">
      <a href="/" class="nav-link">Home</a>
      <a href="#projects" class="nav-link">Projects</a>
      <a href="#links" class="nav-link">Links</a>
      <a href="#contact" class="nav-link">Contact</a>
      <a href="/posts" class="nav-link">Posts</a>
    </div>
  </nav>

  <div class="main-part">
    <h1 id="postTitle">Loading...</h1>
    <div id="postContent"></div>
  </div>

  <script>
    const firebaseConfig = {
        apiKey: "AIzaSyDXz5Kdf72C1Ks-xSauqd5Q1cKZTuBoy-U",
        authDomain: "chickenjockey-studio.firebaseapp.com",
        projectId: "chickenjockey-studio",
        storageBucket: "chickenjockey-studio.firebasestorage.app",
        messagingSenderId: "1012362162434",
        appId: "1:1012362162434:web:6f9ce36d04abcc33fa521b"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const urlParams = new URLSearchParams(window.location.search);
    const postName = urlParams.get("post");
    if (postName) {
      db.collection("posts").where("title", "==", postName).get().then(snapshot => {
        if (!snapshot.empty) {
          const post = snapshot.docs[0].data();
          document.getElementById("postTitle").textContent = post.title;
          document.getElementById("postContent").innerHTML = post.content;
        } else {
          document.getElementById("postTitle").textContent = "Post not found";
        }
      }).catch(error => {
        console.error("Error fetching post: ", error);
      });
    } else {
      document.getElementById("postTitle").textContent = "No post specified";
    }
  </script>
</body>
</html>
